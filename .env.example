# KGV Migration - Environment Configuration
# Copy this file to .env.local for local development

# ===========================================
# Git Flow & GitHub Integration
# ===========================================

# GitHub Personal Access Token (required for Git Flow automation)
# Create at: https://github.com/settings/tokens
# Required scopes: repo, read:user, read:org
GITHUB_TOKEN=ghp_your_github_personal_access_token_here

# Enable Claude Git Flow features
CLAUDE_GIT_FLOW_ENABLED=true

# Default reviewer for PRs (GitHub username)
CLAUDE_DEFAULT_REVIEWER=@andrekirst

# Auto-assign PRs to creator
CLAUDE_AUTO_ASSIGN=true

# ===========================================
# Database Configuration
# ===========================================

# PostgreSQL Connection (Development)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=KGV
POSTGRES_USER=kgv_user
POSTGRES_PASSWORD=dev_password_change_in_production

# Connection String (Alternative format)
CONNECTION_STRING_DEFAULT=Host=localhost;Database=KGV;Username=kgv_user;Password=dev_password_change_in_production

# Legacy SQL Server (for migration)
LEGACY_SQL_SERVER_CONNECTION=Server=legacy-server;Database=KGV_Legacy;Trusted_Connection=true;

# ===========================================
# Cache Configuration
# ===========================================

# Redis Cache
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=dev_redis_password
REDIS_CONNECTION_STRING=localhost:6379,password=dev_redis_password

# ===========================================
# API Configuration
# ===========================================

# .NET Web API Settings
ASPNETCORE_ENVIRONMENT=Development
ASPNETCORE_URLS=http://localhost:5000

# JWT Authentication
JWT_SECRET_KEY=super_secret_jwt_key_change_in_production_minimum_32_characters
JWT_ISSUER=KGV.API
JWT_AUDIENCE=KGV.Frontend
JWT_EXPIRE_HOURS=24

# External API Keys (if needed)
EXTERNAL_API_KEY=your_external_api_key_here

# ===========================================
# Frontend Configuration  
# ===========================================

# Next.js Environment
NODE_ENV=development
NEXT_PUBLIC_API_URL=http://localhost:5000

# Next.js Build Configuration
NEXT_TELEMETRY_DISABLED=1

# Authentication Provider (if using external)
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret_here

# ===========================================
# Container Configuration
# ===========================================

# Docker Compose Network
COMPOSE_PROJECT_NAME=kgv-migration

# Container Registry (for production)
CONTAINER_REGISTRY=ghcr.io
CONTAINER_NAMESPACE=andrekirst

# Image Tags
API_IMAGE_TAG=latest
FRONTEND_IMAGE_TAG=latest

# ===========================================
# Monitoring & Logging
# ===========================================

# Application Insights (optional)
APPLICATIONINSIGHTS_CONNECTION_STRING=your_app_insights_connection_string

# Log Level
LOG_LEVEL=Information

# Structured Logging
ENABLE_STRUCTURED_LOGGING=true

# ===========================================
# Security Configuration
# ===========================================

# Encryption Keys (change in production)
DATA_PROTECTION_KEY=your_data_protection_key_32_chars_min

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# Security Headers
ENABLE_HSTS=true
ENABLE_CSP=true

# ===========================================
# Migration Configuration
# ===========================================

# Strangler Fig Pattern Settings
STRANGLER_FIG_ENABLED=true
LEGACY_SYSTEM_URL=http://legacy-kgv.frankfurt.local

# Migration Percentages (0-100)
MIGRATION_PERCENTAGE_ANTRAEGE=75
MIGRATION_PERCENTAGE_PERSONEN=0
MIGRATION_PERCENTAGE_REPORTS=100

# Dual Write Settings
ENABLE_DUAL_WRITE=true
ENABLE_SHADOW_MODE=true

# ===========================================
# Circuit Breaker Configuration
# ===========================================

# Legacy System Circuit Breaker
CIRCUIT_BREAKER_LEGACY_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_LEGACY_DURATION_SECONDS=60

# Database Circuit Breaker
CIRCUIT_BREAKER_DB_FAILURE_THRESHOLD=3
CIRCUIT_BREAKER_DB_DURATION_SECONDS=30

# External API Circuit Breaker
CIRCUIT_BREAKER_API_FAILURE_THRESHOLD=3
CIRCUIT_BREAKER_API_DURATION_SECONDS=30

# ===========================================
# Notification Configuration (Optional)
# ===========================================

# Slack Integration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL_GENERAL=#kgv-migration
SLACK_CHANNEL_RELEASES=#releases
SLACK_CHANNEL_ALERTS=#alerts

# Microsoft Teams Integration  
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/YOUR/TEAMS/WEBHOOK

# Email Notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
NOTIFICATION_FROM_EMAIL=kgv-migration@yourcompany.com

# ===========================================
# Development Tools
# ===========================================

# Hot Reload
DOTNET_WATCH_RESTART_ON_RUDE_EDIT=true

# Frontend Development
FAST_REFRESH=true
DISABLE_ESLINT_PLUGIN=false

# Debug Settings
ENABLE_DEBUG_LOGGING=false
DEBUG_CIRCUIT_BREAKER=false
DEBUG_STRANGLER_FIG=false

# ===========================================
# Performance Configuration
# ===========================================

# Connection Pool Settings
DB_CONNECTION_POOL_MIN=5
DB_CONNECTION_POOL_MAX=50

# Cache TTL Settings (seconds)
CACHE_TTL_DEFAULT=900
CACHE_TTL_ANTRAEGE=1800
CACHE_TTL_PERSONEN=3600
CACHE_TTL_REPORTS=300

# ===========================================
# Feature Flags
# ===========================================

# Enable/Disable Features
FEATURE_NEW_DASHBOARD=true
FEATURE_ADVANCED_SEARCH=false
FEATURE_EXPORT_EXCEL=true
FEATURE_EXPORT_PDF=true
FEATURE_GERMAN_LOCALIZATION=true

# A/B Testing
ENABLE_AB_TESTING=false
AB_TEST_PERCENTAGE=10

# ===========================================
# Kubernetes Configuration (Production)
# ===========================================

# Namespace
K8S_NAMESPACE=kgv-system

# Resource Limits
K8S_CPU_LIMIT=1000m
K8S_MEMORY_LIMIT=512Mi
K8S_CPU_REQUEST=100m
K8S_MEMORY_REQUEST=128Mi

# Scaling
K8S_MIN_REPLICAS=2
K8S_MAX_REPLICAS=10
K8S_TARGET_CPU_PERCENTAGE=70

# ===========================================
# Backup & Recovery
# ===========================================

# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# File Backup Location
BACKUP_STORAGE_PATH=/backups
BACKUP_S3_BUCKET=kgv-backups

# ===========================================
# Compliance & Audit
# ===========================================

# GDPR Compliance
GDPR_DATA_RETENTION_DAYS=2555  # 7 years
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_RETENTION_DAYS=365

# Data Classification
ENABLE_DATA_CLASSIFICATION=true
DEFAULT_DATA_CLASSIFICATION=internal

# ===========================================
# Testing Configuration
# ===========================================

# Test Database
TEST_DB_CONNECTION=Host=localhost;Database=KGV_Test;Username=test_user;Password=test_password

# Integration Test Settings
INTEGRATION_TEST_TIMEOUT=30000
E2E_TEST_TIMEOUT=60000

# Load Testing
LOAD_TEST_USERS=100
LOAD_TEST_DURATION=300  # 5 minutes

# ===========================================
# Local Development Overrides
# ===========================================

# Override any setting above for local development
# Uncomment and modify as needed:

# POSTGRES_PASSWORD=my_local_password
# API_URL=http://host.docker.internal:5000
# ENABLE_DEBUG_LOGGING=true