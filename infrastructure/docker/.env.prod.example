# KGV Migration - Production Environment Variables
# Copy this file to .env.prod and configure with secure values
# NEVER commit .env.prod file to version control
# Store this file securely (e.g., AWS Secrets Manager, HashiCorp Vault)

# Database Configuration
POSTGRES_DB=kgv_production
POSTGRES_USER=kgv_prod_user
# CRITICAL: Use strong, unique passwords (min 32 chars)
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_ME_PRODUCTION_DB_PASSWORD
POSTGRES_APP_PASSWORD=CHANGE_ME_APP_USER_PASSWORD
POSTGRES_PORT=5432
# Enable SSL for database connections
POSTGRES_SSL_MODE=require

# Redis Configuration
# Generate with: openssl rand -base64 32
REDIS_PASSWORD=CHANGE_ME_PRODUCTION_REDIS_PASSWORD
REDIS_PORT=6379
# Redis persistence settings
REDIS_PERSISTENCE=yes
REDIS_MAX_MEMORY=512mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# JWT Configuration
# CRITICAL: Use very strong secret (min 64 chars)
# Generate with: openssl rand -base64 64
JWT_SECRET=CHANGE_ME_PRODUCTION_JWT_SECRET_VERY_LONG
JWT_ISSUER=kgv-api-prod
JWT_AUDIENCE=kgv-web-prod
JWT_EXPIRY_HOURS=8
JWT_REFRESH_EXPIRY_DAYS=7

# NextAuth Configuration
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=CHANGE_ME_PRODUCTION_NEXTAUTH_SECRET
NEXTAUTH_URL=https://your-domain.com

# Public URLs
NEXT_PUBLIC_API_URL=https://your-domain.com/api
PUBLIC_APP_URL=https://your-domain.com

# SSL/TLS Configuration
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_DH_PARAM_PATH=/etc/nginx/ssl/dhparam.pem
FORCE_SSL=true
HSTS_MAX_AGE=31536000

# Admin Passwords for Monitoring Tools
# Generate with: openssl rand -base64 32
GRAFANA_ADMIN_USER=grafana_admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PROD_PASSWORD
GRAFANA_ROOT_URL=https://your-domain.com:3001
GRAFANA_PORT=3001

# Seq Logging Configuration
# Generate with: openssl rand -base64 32
SEQ_ADMIN_PASSWORD=CHANGE_ME_SEQ_PROD_PASSWORD
SEQ_WEB_PORT=5341
SEQ_INGESTION_PORT=5342
SEQ_RETENTION_DAYS=90

# Prometheus Monitoring
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_DAYS=30

# API Configuration
API_RATE_LIMIT=50
API_RATE_WINDOW=15
API_MAX_REQUEST_SIZE=10M
API_TIMEOUT_SECONDS=30

# Authentication Rate Limiting
AUTH_RATE_LIMIT=5
AUTH_RATE_WINDOW=60
LOGIN_MAX_ATTEMPTS=5
LOGIN_LOCKOUT_MINUTES=30

# Encryption Keys (for data at rest)
# CRITICAL: Rotate regularly
# Generate with: openssl rand -hex 32
DATA_ENCRYPTION_KEY=CHANGE_ME_PRODUCTION_ENCRYPTION_KEY
BACKUP_ENCRYPTION_KEY=CHANGE_ME_BACKUP_ENCRYPTION_KEY

# CORS Settings (restrict to your domains)
CORS_ALLOWED_ORIGINS=https://your-domain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE
CORS_ALLOWED_HEADERS=Content-Type,Authorization
CORS_MAX_AGE=3600

# Security Settings
ENABLE_SECURITY_HEADERS=true
ENABLE_RATE_LIMITING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_WAF=true
LOG_SANITIZATION=true
BLOCK_SUSPICIOUS_IPS=true

# Session Configuration
SESSION_TIMEOUT_MINUTES=15
SESSION_SLIDING_EXPIRATION=false
MAX_CONCURRENT_SESSIONS=3
SESSION_SECURE_COOKIE=true
SESSION_SAME_SITE=strict

# Password Policy (Production - Strict)
PASSWORD_MIN_LENGTH=16
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_HISTORY_COUNT=12
PASSWORD_MAX_AGE_DAYS=90
PASSWORD_MIN_AGE_HOURS=24
ACCOUNT_LOCKOUT_THRESHOLD=3
ACCOUNT_LOCKOUT_DURATION_MINUTES=60

# Two-Factor Authentication
ENABLE_2FA=true
2FA_ISSUER=KGV-System
TOTP_WINDOW=1

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION=true
BACKUP_S3_BUCKET=your-backup-bucket
AWS_REGION=eu-central-1

# Monitoring & Alerting
ENABLE_MONITORING=true
ALERT_EMAIL=security@your-domain.com
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
PAGERDUTY_API_KEY=YOUR_PAGERDUTY_KEY

# Compliance & GDPR
GDPR_ENABLED=true
DATA_RETENTION_DAYS=365
ANONYMIZE_LOGS=true
ENABLE_CONSENT_TRACKING=true
ENABLE_DATA_PORTABILITY=true
DPO_EMAIL=dpo@your-domain.com

# Performance Tuning
MAX_CONNECTIONS=1000
CONNECTION_TIMEOUT=30
KEEP_ALIVE_TIMEOUT=65

# Production Flags
DEBUG_MODE=false
ENABLE_SWAGGER=false
ENABLE_GRAPHQL_PLAYGROUND=false
ENABLE_DEV_ENDPOINTS=false

# Docker Settings
HTTP_PORT=80
HTTPS_PORT=443

# Disaster Recovery
DR_ENABLED=true
DR_REGION=eu-west-1
FAILOVER_ENABLED=true